image:
  #- melezhik/sparrow:alpine
  #- melezhik/sparrow:archlinux
  - melezhik/sparrow:debian
tasks:
  -
    name: test
    default: true
    language: Bash
    code: |
      set -e
      cd source/
      zef --version
      raku --version
      which gcc
      gcc --version
      
      zef install . --deps-only --test-depends --build-depends --/test -to=home         
      zef install --verbose .
    depends:
      -
        name: deps
  -
    name: deps
    language: Bash
    code: |
      set -e
      #sudo apk add cmake g++
      cat << HERE 'Package: *' | sudo tee  > /etc/apt/preferences.d/unstable.pref
      Package: *
      Pin: release o=Debian,a=unstable
      Pin-Priority: 10
      HERE
      sudo apt-get update
      sudo apt-get install -y gcc-12
      


